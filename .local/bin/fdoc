#!/bin/sh -eu

grep -lRi \
  --include=*.md \
  --include=*.txt \
  --include=*.html \
  "${1-.}" /etc/documentation \
  | fzf --preview "grep -hi -B 10 -A 10  ${1-.} {}" \
  | while read -r doc

do
  extension=${doc##*.}

  case "$extension" in
    md) vim "$doc" ;;
    html) w3m -dump "$doc" | vim - ;;
    *) vim "$doc" ;;
  esac
done
